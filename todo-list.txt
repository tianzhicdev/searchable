# Todo List - Format: [status] task description
# Status: [ ] = unfinished, [x] = finished, [*] = in progress
# Lines starting with # are comments

[x] (completed: 2025-07-13 21:08) hello
[x] (completed: 2025-07-13 21:16) conn = get_db_connection() cur = conn.cursor() execute_sql ... cur.close() conn.close() this boilerplate code is everywhere, exammine all the instances where execute_sql is use on the backend.
[x] (completed: 2025-07-13 21:28) examine all the backend py code, improve reusability. 
[x] (completed: 2025-07-13 23:14) "./exec.sh local test --t deposits" is failing: requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5005/api/v1/deposit/create
[x] examime all code in frontend dir, the exisitng FRONTEND BEHAVIOUR IS PERFECT but the code can use some refactoring - improve reusability, some styles are here and there - they should ALL be contrally managed
[x] (completed: 2025-07-14 11:19) rewrite CLAUDE.md to reflect the latest changes, stress 1. reusability of the code. 2. respect existing code styles. 3. centrally manage sql (backend), components and components styles (frontend) 
[x] (completed: 2025-07-18 00:32) =================================== FAILURES =================================== ______________ TestSearchableIntegration.test_07_get_user_profile ______________ test_integration.py:237: in test_07_get_user_profile     response = self.client.get_user_profile() api_client.py:146: in get_user_profile     response.raise_for_status() venv/lib/python3.9/site-packages/requests/models.py:1021: in raise_for_status     raise HTTPError(http_error_msg, response=self) E   requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5005/api/v1/profile ____________ TestSearchableIntegration.test_12_create_user_profile _____________ test_integration.py:431: in test_12_create_user_profile     response = self.client.update_profile(profile_data)  # Use update_profile instead api_client.py:390: in update_profile     response.raise_for_status() venv/lib/python3.9/site-packages/requests/models.py:1021: in raise_for_status     raise HTTPError(http_error_msg, response=self) E   requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5005/api/v1/profile ______________ TestSearchableIntegration.test_13_get_user_profile ______________ test_integration.py:455: in test_13_get_user_profile     assert hasattr(self.__class__, 'profile_created') E   AssertionError: assert False E    +  where False = hasattr(<class 'test_integration.TestSearchableIntegration'>, 'profile_created') E    +    where <class 'test_integration.TestSearchableIntegration'> = <test_integration.TestSearchableIntegration object at 0x104a4aa90>.__class__ ____________ TestSearchableIntegration.test_14_update_user_profile _____________ test_integration.py:486: in test_14_update_user_profile     response = self.client.update_user_profile(updated_data) api_client.py:162: in update_user_profile     response.raise_for_status() venv/lib/python3.9/site-packages/requests/models.py:1021: in raise_for_status     raise HTTPError(http_error_msg, response=self) E   requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5005/api/v1/profile _______ TestSearchableIntegration.test_17_media_profile_update_with_uri ________ test_integration.py:584: in test_17_media_profile_update_with_uri     response = self.client.update_user_profile(updated_data) api_client.py:162: in update_user_profile     response.raise_for_status() venv/lib/python3.9/site-packages/requests/models.py:1021: in raise_for_status     raise HTTPError(http_error_msg, response=self) E   requests.exceptions.HTTPError: 500 Server Error: INTERNAL SERVER ERROR for url: http://localhost:5005/api/v1/profile =========================== short test summary info ============================ FAILED test_integration.py::TestSearchableIntegration::test_07_get_user_profile FAILED test_integration.py::TestSearchableIntegration::test_12_create_user_profile FAILED test_integration.py::TestSearchableIntegration::test_13_get_user_profile FAILED test_integration.py::TestSearchableIntegration::test_14_update_user_profile FAILED test_integration.py::TestSearchableIntegration::test_17_media_profile_update_with_uri ========================= 5 failed, 13 passed in 2.42s ========================= ‚ùå FAILED: test_integration.py Running: test_user_profile_creation.py ============================= test session starts ============================== platform darwin -- Python 3.9.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/biubiu/projects/searchable/integration-tests/venv/bin/python cachedir: .pytest_cache metadata: {'Python': '3.9.6', 'Platform': 'macOS-15.1-arm64-arm-64bit', 'Packages': {'pytest': '7.4.3', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'metadata': '3.1.1'}} rootdir: /Users/biubiu/projects/searchable/integration-tests configfile: pytest.ini plugins: html-4.1.1, metadata-3.1.1 collecting ... collected 2 items  test_user_profile_creation.py::test_user_registration_creates_profile Testing: User registration creates user_profile   - Registering user: testuser_qrtgefr3 ‚úì User registered successfully with ID: 2 ‚úì Login successful FAILED test_user_profile_creation.py::test_existing_user_without_profile Testing: Handling users without profiles   - This requires manual database manipulation   - Run create_missing_user_profiles.py to fix any such users PASSED  =================================== FAILURES =================================== ____________________ test_user_registration_creates_profile ____________________ test_user_profile_creation.py:82: in test_user_registration_creates_profile     assert response.status_code == 200, f"Could not verify user_profile exists: {response.status_code}" E   AssertionError: Could not verify user_profile exists: 404 E   assert 404 == 200 E    +  where 404 = <Response [404]>.status_code =========================== short test summary info ============================ FAILED test_user_profile_creation.py::test_user_registration_creates_profile ========================= 1 failed, 1 passed in 0.31s ========================== ‚ùå FAILED: test_user_profile_creation.py ‚ùå Core tests failed. Stopping execution.
[x] (completed: 2025-07-18 00:44) './exec.sh local content-upload' has failures, you must upload and then verify that users and content and pics are all working fine. last run has failures: biubiu@macacas-Laptop searchable % ./exec.sh local  content-upload üéµ Uploading music content to local environment... Uploading to local environment (http://localhost:5005)...  Processing: All Melody ================================================== Created user: nilsfrahm Logged in as: nilsfrahm@ec.com Failed to update profile: {     "error": "Failed to update profile" }  Skipping gallery upload: cover_1.jpg Skipping gallery upload: cover_2.jpg Skipping gallery upload: cover_3.jpg Uploaded searchable image: cover_1.jpg Uploaded searchable image: cover_2.jpg Uploaded searchable image: cover_3.jpg Uploaded music file: 12. Nils Frahm - Harm Hymn.mp3 Uploaded music file: 01. Nils Frahm - The Whole Universe Wants to Be Touched.mp3 Uploaded music file: 06. Nils Frahm - Forever Changeless.mp3 Uploaded music file: 07. Nils Frahm - All Melody.mp3 Uploaded music file: 02. Nils Frahm - Sunson.mp3 Created searchable: LateNightTales: Nils Frahm (ID: 2) Successfully uploaded content for: LateNightTales: Nils Frahm  Processing: Papa s Ear ================================================== Created user: tenniscoats Logged in as: tenniscoats@ec.com Failed to update profile: {     "error": "Failed to update profile" }  Skipping gallery upload: cover_1.jpg Skipping gallery upload: cover_2.jpg Skipping gallery upload: cover_3.jpg Uploaded searchable image: cover_1.jpg Uploaded searchable image: cover_2.jpg Uploaded searchable image: cover_3.jpg Uploaded music file: 04. Tenniscoats - Papaya.mp3 Uploaded music file: 08. Tenniscoats - Sabaku.mp3 Uploaded music file: 05. Tenniscoats - Sappolondon.mp3 Uploaded music file: 06. Tenniscoats - New Seasons Dead.mp3 Uploaded music file: 02. Tenniscoats - Hikoki.mp3 Created searchable: Papa's Ear (ID: 3) Successfully uploaded content for: Papa's Ear  Processing: Sail the Seven Seas ================================================== Created user: parkhyejin Logged in as: parkhyejin@ec.com Failed to update profile: {     "error": "Failed to update profile" }  Skipping gallery upload: cover_1.jpg Skipping gallery upload: cover_2.jpg Skipping gallery upload: cover_3.jpg Uploaded searchable image: cover_1.jpg Uploaded searchable image: cover_2.jpg Uploaded searchable image: cover_3.jpg Uploaded music file: 10. ·Ñá·Ö°·Ü®·Ñí·Ö®·Ñå·Öµ·Ü´ Park Hye Jin - Proud of Me.mp3 Uploaded music file: 04. ·Ñá·Ö°·Ü®·Ñí·Ö®·Ñå·Öµ·Ü´ Park Hye Jin - Started from the Bottom.mp3 Uploaded music file: 07. ·Ñá·Ö°·Ü®·Ñí·Ö®·Ñå·Öµ·Ü´ Park Hye Jin - Tryna Get to over You.mp3 Uploaded music file: 14. ·Ñá·Ö°·Ü®·Ñí·Ö®·Ñå·Öµ·Ü´ Park Hye Jin - California.mp3 Uploaded music file: 01. ·Ñá·Ö°·Ü®·Ñí·Ö®·Ñå·Öµ·Ü´ Park Hye Jin - Bklyn Babe.mp3 Created searchable: Park Hye jin 2018 Mixtape (ID: 4) Successfully uploaded content for: Park Hye jin 2018 Mixtape  Processing: Salt Rain ================================================== Created user: radioinsane Logged in as: radioinsane@ec.com Failed to update profile: {     "error": "Failed to update profile" }  Skipping gallery upload: cover_1.jpg Skipping gallery upload: cover_2.jpg Skipping gallery upload: cover_3.jpg Uploaded searchable image: cover_1.jpg Uploaded searchable image: cover_2.jpg Uploaded searchable image: cover_3.jpg Uploaded music file: 04. Susheela Raman - Woman.mp3 Uploaded music file: 03. Susheela Raman - Mamavatu.mp3 Uploaded music file: 11. Susheela Raman - O Rama.mp3 Uploaded music file: 05. Susheela Raman - Mahima.mp3 Uploaded music file: 02. Susheela Raman - Maya.mp3 Created searchable: Rain/Salt (ID: 5) Successfully uploaded content for: Rain/Salt  Processing: Windswept Adan ================================================== Created user: ichikoaoba  Logged in as: ichikoaoba@ec.com Failed to update profile: {     "error": "Failed to update profile" }  Skipping gallery upload: cover_1.jpg Skipping gallery upload: cover_2.jpg Skipping gallery upload: cover_3.jpg Uploaded searchable image: cover_1.jpg Uploaded searchable image: cover_2.jpg Uploaded searchable image: cover_3.jpg Uploaded music file: 11. Ichiko Aoba - Hagupit.mp3 Uploaded music file: 02. Ichiko Aoba - Pilgrimage.mp3 Uploaded music file: 12. Ichiko Aoba - Dawn in the Adan.mp3 Uploaded music file: 07. Ichiko Aoba - Kirinaki Shima.mp3 Uploaded music file: 05. Ichiko Aoba - Easter Lily.mp3 Created searchable: Windswept Adan (ID: 6) Successfully uploaded content for: Windswept Adan  Processing: you are my friend ================================================== Created user: soapskin Logged in as: soapskin@ec.com Failed to update profile: {     "error": "Failed to update profile" }  Skipping gallery upload: cover_1.jpg Skipping gallery upload: cover_2.jpg Skipping gallery upload: cover_3.jpg Uploaded searchable image: cover_1.jpg Uploaded searchable image: cover_2.jpg Uploaded searchable image: cover_3.jpg Uploaded music file: 02. Soap&Skin - Athom.mp3 Uploaded music file: 03. Soap&Skin - Italy.mp3 Uploaded music file: 06. Soap&Skin - Creep.mp3 Uploaded music file: 12. Soap&Skin - What A Wonderful World.mp3 Uploaded music file: 05. Soap&Skin - Surrounded.mp3 Created searchable: Soap&Skin (ID: 7) Successfully uploaded content for: Soap&Skin  Processing: Â∫É„ÅÑ‰∏ñÁïå „Å® „Åõ„Åæ„ÅÑ‰∏ñÁïå ================================================== Created user: artist94 Logged in as: artist94@ec.com Failed to update profile: {     "error": "Failed to update profile" }  Skipping gallery upload: cover_1.jpg Skipping gallery upload: cover_2.jpg Skipping gallery upload: cover_3.jpg Uploaded searchable image: cover_1.jpg Uploaded searchable image: cover_2.jpg Uploaded searchable image: cover_3.jpg Uploaded music file: 38. Rei Harakami - hashi.mp3 Uploaded music file: 27. Rei Harakami - „Éû„Çµ„Ç™.mp3 Uploaded music file: 35. Rei Harakami - „Éü„Çπ„Çø„Éº„É¢„Éº„Éã„É≥„ÇØ„Çô„Éä„Ç§„Éà.mp3 Uploaded music file: 02. Rei Harakami - „Éõ„Çô„Éª„ÉÜ„Ç≠„Éº„É©.mp3 Uploaded music file: 11. Rei Harakami - „Åô„Åô„Çô„Åó„ÅÑ„Å≤„Åã„Çä.mp3 Created searchable: Â∫É„ÅÑ‰∏ñÁïå„Å®„Åõ„Åæ„ÅÑ‰∏ñÁïå (ID: 8) Successfully uploaded content for: Â∫É„ÅÑ‰∏ñÁïå„Å®„Åõ„Åæ„ÅÑ‰∏ñÁïå  ================================================== Upload complete! Successfully uploaded 7 items to local ‚úÖ Content upload completed!